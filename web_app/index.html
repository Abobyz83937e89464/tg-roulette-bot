<!DOCTYPE html>
<html>
<head>
    <title>Black Roulette</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: #0a0a0a; color: #fff; font-family: Arial; overflow: hidden; height: 100vh; }
        .app { height: 100vh; display: flex; flex-direction: column; background: #0a0a0a; }
        
        .header { background: linear-gradient(135deg, #1a1a1a 0%, #000 100%); padding: 15px 20px; border-bottom: 1px solid #333; }
        .user-info { display: flex; justify-content: space-between; align-items: center; }
        .user-name { font-size: 18px; font-weight: 600; }
        .balance { background: linear-gradient(45deg, #8B4513, #A0522D); padding: 8px 15px; border-radius: 20px; font-weight: bold; }
        
        .content { flex: 1; padding: 20px; overflow-y: auto; }
        
        .payment-btn { background: linear-gradient(135deg, #27ae60, #2ecc71); border: none; border-radius: 15px; padding: 18px; color: white; font-size: 16px; font-weight: bold; cursor: pointer; width: 100%; margin-bottom: 20px; }
        
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 25px; }
        .stat-card { background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); border: 1px solid #333; border-radius: 12px; padding: 15px 10px; text-align: center; }
        .stat-value { font-size: 20px; font-weight: bold; color: #FFD700; margin-bottom: 5px; }
        .stat-label { font-size: 12px; color: #888; font-weight: 500; }
        
        .main-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 25px; }
        .main-btn { background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%); border: 1px solid #444; border-radius: 15px; padding: 20px 15px; color: white; font-size: 14px; font-weight: 600; cursor: pointer; }
        .btn-icon { font-size: 24px; margin-bottom: 8px; }
        
        .roulette-section { background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); border: 1px solid #333; border-radius: 15px; padding: 20px; margin-bottom: 20px; }
        .section-title { font-size: 20px; font-weight: bold; margin-bottom: 15px; color: #FFD700; text-align: center; }
        
        .horizontal-roulette { position: relative; height: 120px; margin: 20px 0; overflow: hidden; border-radius: 10px; background: #000; border: 2px solid #333; }
        .roulette-track { display: flex; position: absolute; top: 0; left: 0; height: 100%; transition: transform 6s cubic-bezier(0.1, 0.8, 0.2, 1); }
        .roulette-item { width: 100px; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; border-right: 1px solid #333; font-weight: bold; font-size: 12px; text-align: center; padding: 5px; }
        .center-line { position: absolute; top: 0; left: 50%; transform: translateX(-50%); width: 3px; height: 100%; background: #ff4444; z-index: 10; box-shadow: 0 0 15px rgba(255,0,0,0.7); }
        
        .spin-info { text-align: center; margin-bottom: 15px; }
        .free-spin { color: #00ff00; font-size: 16px; font-weight: 600; margin-bottom: 5px; }
        .timer { color: #ff4444; font-size: 14px; font-weight: 500; }
        
        .spin-btn { background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); border: none; border-radius: 25px; padding: 18px; color: white; font-size: 18px; font-weight: bold; cursor: pointer; width: 100%; }
        
        .roulette-tabs { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px; }
        .tab-btn { background: #2d2d2d; border: 1px solid #444; border-radius: 10px; padding: 12px; color: #888; font-weight: 600; cursor: pointer; }
        .tab-btn.active { background: linear-gradient(135deg, #8B4513 0%, #654321 100%); color: white; border-color: #A0522D; }
        
        .probabilities { background: #1a1a1a; border: 1px solid #333; border-radius: 15px; padding: 20px; margin-bottom: 20px; }
        .prob-title { font-size: 18px; font-weight: bold; margin-bottom: 15px; color: #FFD700; text-align: center; }
        .prob-item { display: flex; justify-content: space-between; margin-bottom: 8px; padding: 8px; background: #2d2d2d; border-radius: 8px; }
        .prob-name { font-weight: 500; }
        .prob-chance { color: #FFD700; font-weight: bold; }
        
        .bottom-nav { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; background: #1a1a1a; border-top: 1px solid #333; padding: 10px 0; }
        .nav-item { display: flex; flex-direction: column; align-items: center; padding: 8px 5px; color: #888; font-size: 12px; font-weight: 500; cursor: pointer; }
        .nav-item.active { color: #FFD700; }
        .nav-icon { font-size: 20px; margin-bottom: 4px; }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <div class="user-info">
                <div class="user-name" id="userName">Player</div>
                <div class="balance">‚≠ê <span id="balance">50</span></div>
            </div>
        </div>
        
        <div class="content">
            <button class="payment-btn" onclick="showDepositInstructions()">üí∞ –ü–û–ü–û–õ–ù–ò–¢–¨ –ë–ê–õ–ê–ù–°</button>
            
            <div class="stats-grid">
                <div class="stat-card"><div class="stat-value">82</div><div class="stat-label">–†–ï–§–ï–†–ê–õ–´</div></div>
                <div class="stat-card"><div class="stat-value">156</div><div class="stat-label">–í–†–ê–©–ï–ù–ò–ô</div></div>
                <div class="stat-card"><div class="stat-value">5,280</div><div class="stat-label">–í–´–ò–ì–†–´–®</div></div>
            </div>
            
            <div class="main-buttons">
                <button class="main-btn" onclick="openModal('inventory')"><div class="btn-icon">üéí</div>–ò–ù–í–ï–ù–¢–ê–†–¨</button>
                <button class="main-btn" onclick="openModal('referral')"><div class="btn-icon">üë•</div>–†–ï–§–ï–†–ê–õ–´</button>
                <button class="main-btn" onclick="openModal('leaderboard')"><div class="btn-icon">üèÜ</div>–¢–û–ü –ò–ì–†–û–ö–û–í</button>
                <button class="main-btn" onclick="openModal('shop')"><div class="btn-icon">üõí</div>–ú–ê–ì–ê–ó–ò–ù</button>
            </div>
            
            <div class="roulette-tabs">
                <button class="tab-btn active" onclick="switchRoulette('stars')">‚≠ê –ó–í–Å–ó–î–´</button>
                <button class="tab-btn" onclick="switchRoulette('nft')">üé® NFT</button>
            </div>
            
            <div class="roulette-section" id="starsRoulette">
                <div class="section-title">üé∞ –†–£–õ–ï–¢–ö–ê –ó–í–Å–ó–î</div>
                <div class="spin-info">
                    <div class="free-spin">‚ú® –ë–ï–°–ü–õ–ê–¢–ù–û–ï –í–†–ê–©–ï–ù–ò–ï</div>
                    <div class="timer">‚è∞ –ß–ï–†–ï–ó: <span id="timer">00:00</span></div>
                </div>
                
                <div class="horizontal-roulette">
                    <div class="center-line"></div>
                    <div class="roulette-track" id="starsTrack"></div>
                </div>
                
                <button class="spin-btn" onclick="spinRoulette('stars')">–ö–†–£–¢–ò–¢–¨ –†–£–õ–ï–¢–ö–£ - 10 ‚≠ê</button>
            </div>
            
            <div class="roulette-section" id="nftRoulette" style="display:none">
                <div class="section-title">üé® NFT –†–£–õ–ï–¢–ö–ê</div>
                <div class="spin-info">
                    <div class="free-spin">‚ú® –ë–ï–°–ü–õ–ê–¢–ù–û–ï –í–†–ê–©–ï–ù–ò–ï</div>
                    <div class="timer">‚è∞ –ß–ï–†–ï–ó: <span id="nftTimer">00:00</span></div>
                </div>
                
                <div class="horizontal-roulette">
                    <div class="center-line"></div>
                    <div class="roulette-track" id="nftTrack"></div>
                </div>
                
                <button class="spin-btn" onclick="spinRoulette('nft')">–ö–†–£–¢–ò–¢–¨ –†–£–õ–ï–¢–ö–£ - 50 ‚≠ê</button>
            </div>
            
            <div class="probabilities">
                <div class="prob-title">üéØ –®–ê–ù–°–´ –í–´–ò–ì–†–´–®–ê</div>
                <div class="prob-list" id="starsProb">
                    <div class="prob-item"><span class="prob-name">10 –∑–≤–µ–∑–¥</span><span class="prob-chance">50%</span></div>
                    <div class="prob-item"><span class="prob-name">25 –∑–≤–µ–∑–¥</span><span class="prob-chance">30%</span></div>
                    <div class="prob-item"><span class="prob-name">50 –∑–≤–µ–∑–¥</span><span class="prob-chance">15%</span></div>
                    <div class="prob-item"><span class="prob-name">100 –∑–≤–µ–∑–¥</span><span class="prob-chance">5%</span></div>
                </div>
                <div class="prob-list" id="nftProb" style="display:none">
                    <div class="prob-item"><span class="prob-name">Common NFT</span><span class="prob-chance">60%</span></div>
                    <div class="prob-item"><span class="prob-name">Rare NFT</span><span class="prob-chance">25%</span></div>
                    <div class="prob-item"><span class="prob-name">Epic NFT</span><span class="prob-chance">12%</span></div>
                    <div class="prob-item"><span class="prob-name">Legendary NFT</span><span class="prob-chance">3%</span></div>
                </div>
            </div>
        </div>
        
        <div class="bottom-nav">
            <div class="nav-item active"><div class="nav-icon">üè†</div>–ì–ª–∞–≤–Ω–∞—è</div>
            <div class="nav-item"><div class="nav-icon">üìã</div>–ó–∞–¥–∞–Ω–∏—è</div>
            <div class="nav-item"><div class="nav-icon">üé∞</div>–†—É–ª–µ—Ç–∫–∞</div>
            <div class="nav-item"><div class="nav-icon">üõí</div>–ú–∞–≥–∞–∑–∏–Ω</div>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.BackButton.hide();
        
        const user = tg.initDataUnsafe.user;
        document.getElementById('userName').textContent = user?.first_name || '–ò–≥—Ä–æ–∫';
        
        // –ü–†–ê–í–ò–õ–¨–ù–´–ï –ü–†–ò–ó–´ - —Ç–µ–ø–µ—Ä—å –¥–∞—é—Ç —Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–µ–∑–¥
        const STAR_PRIZES = [
            { name: "10 ‚≠ê", value: 10, probability: 0.5, color: "#FF6B6B" },
            { name: "25 ‚≠ê", value: 25, probability: 0.3, color: "#4ECDC4" },
            { name: "50 ‚≠ê", value: 50, probability: 0.15, color: "#FFD166" },
            { name: "100 ‚≠ê", value: 100, probability: 0.05, color: "#6A0572" }
        ];
        
        const REAL_NFT = [
            { name: "Jingle Bells", value: "jingle_bells", probability: 0.15, color: "#FF6B6B", rarity: "COMMON", supply: "124,593" },
            { name: "Eternal Candle", value: "eternal_candle", probability: 0.12, color: "#4ECDC4", rarity: "COMMON", supply: "46,590" },
            { name: "Skull Flower", value: "skull_flower", probability: 0.08, color: "#FFD166", rarity: "RARE", supply: "24,126" },
            { name: "Sakura Flower", value: "sakura_flower", probability: 0.14, color: "#FF69B4", rarity: "COMMON", supply: "93,115" },
            { name: "Jelly Bunny", value: "jelly_bunny", probability: 0.16, color: "#9B59B6", rarity: "COMMON", supply: "129,350" },
            { name: "Cupid Charm", value: "cupid_charm", probability: 0.07, color: "#E74C3C", rarity: "RARE", supply: "33,112" },
            { name: "Hanging Star", value: "hanging_star", probability: 0.1, color: "#F1C40F", rarity: "COMMON", supply: "58,118" },
            { name: "Easter Egg", value: "easter_egg", probability: 0.18, color: "#27AE60", rarity: "COMMON", supply: "173,176" },
            { name: "Spy Agaric", value: "spy_agaric", probability: 0.13, color: "#D35400", rarity: "COMMON", supply: "89,438" },
            { name: "Homemade Cake", value: "homemade_cake", probability: 0.2, color: "#8E44AD", rarity: "COMMON", supply: "199,482" }
        ];
        
        let userBalance = 50;
        let freeSpinAvailable = true;
        
        function showDepositInstructions() {
            const message = `üí´ –î–õ–Ø –ü–û–ü–û–õ–ù–ï–ù–ò–Ø –ë–ê–õ–ê–ù–°–ê:

üìù –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É @HE3BECTH0 –ø–æ —à–∞–±–ª–æ–Ω—É:

!–ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ 15
!–ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ 25  
!–ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ 100

üéÅ –ü–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã –∫–∏–Ω—å—Ç–µ –ª—é–±–æ–π –ø–æ–¥–∞—Ä–æ–∫ –∏–ª–∏ —Å—Ç–∏–∫–µ—Ä!

‚úÖ –ó–≤—ë–∑–¥—ã –Ω–∞—á–∏—Å–ª—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!`;
            alert(message);
        }
        
        function initRoulettes() {
            createRouletteTrack('starsTrack', STAR_PRIZES);
            createRouletteTrack('nftTrack', REAL_NFT);
        }
        
        function createRouletteTrack(trackId, prizes) {
            const track = document.getElementById(trackId);
            track.innerHTML = '';
            for (let copy = 0; copy < 5; copy++) {
                prizes.forEach((prize, index) => {
                    const item = document.createElement('div');
                    item.className = 'roulette-item';
                    item.style.background = prize.color;
                    item.innerHTML = `<div>${prize.name}</div><small>${prize.supply || ''}</small>`;
                    track.appendChild(item);
                });
            }
        }
        
        function switchRoulette(type) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('starsRoulette').style.display = type === 'stars' ? 'block' : 'none';
            document.getElementById('nftRoulette').style.display = type === 'nft' ? 'block' : 'none';
            document.getElementById('starsProb').style.display = type === 'stars' ? 'block' : 'none';
            document.getElementById('nftProb').style.display = type === 'nft' ? 'block' : 'none';
        }
        
        function spinRoulette(type) {
            const cost = type === 'stars' ? 10 : 50;
            const isFree = freeSpinAvailable && type === 'stars';
            
            if (!isFree && userBalance < cost) {
                alert(`‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥! –ù—É–∂–Ω–æ ${cost} ‚≠ê`);
                showDepositInstructions();
                return;
            }
            
            if (!isFree) {
                userBalance -= cost;
                document.getElementById('balance').textContent = userBalance;
            } else {
                freeSpinAvailable = false;
                document.getElementById('timer').textContent = "23:59";
                startFreeSpinTimer();
            }
            
            const track = document.getElementById(type + 'Track');
            const prizes = type === 'stars' ? STAR_PRIZES : REAL_NFT;
            
            track.style.transition = 'none';
            track.style.transform = 'translateX(0)';
            void track.offsetWidth;
            
            const itemWidth = 100;
            const targetIndex = Math.floor(Math.random() * prizes.length) + (prizes.length * 2);
            const targetPosition = -(targetIndex * itemWidth) + (2 * itemWidth);
            
            track.style.transition = 'transform 6s cubic-bezier(0.1, 0.8, 0.2, 1)';
            track.style.transform = `translateX(${targetPosition}px)`;
            
            setTimeout(() => {
                const resultIndex = targetIndex % prizes.length;
                const result = prizes[resultIndex];
                
                if (type === 'stars') {
                    // –¢–û–ß–ù–û–ï –ù–ê–ß–ò–°–õ–ï–ù–ò–ï - 10 –¥–∞—Å—Ç 10, 25 –¥–∞—Å—Ç 25 –∏ —Ç.–¥.
                    userBalance += result.value;
                    document.getElementById('balance').textContent = userBalance;
                    alert(`üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏: ${result.name}!`);
                } else {
                    alert(`üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ NFT: ${result.name} (${result.rarity})!\n–í –Ω–∞–ª–∏—á–∏–∏: ${result.supply} —à—Ç.`);
                }
            }, 6000);
        }
        
        function startFreeSpinTimer() {
            let timeLeft = 86399; // 23:59:59
            const timer = setInterval(() => {
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    freeSpinAvailable = true;
                    document.getElementById('timer').textContent = "00:00";
                    return;
                }
                timeLeft--;
                const hours = Math.floor(timeLeft / 3600);
                const minutes = Math.floor((timeLeft % 3600) / 60);
                document.getElementById('timer').textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        initRoulettes();
    </script>
</body>
</html>
